# MediaFusion Apache Reverse Proxy Configuration
# For Ultra Seedbox and similar environments

# Ensure these modules are enabled:
# sudo a2enmod proxy proxy_http headers rewrite

# Place this inside your VirtualHost block

<Location /mediafusion>
    # Proxy settings
    ProxyPreserveHost On
    ProxyPass http://localhost:8000
    ProxyPassReverse http://localhost:8000

    # Set forwarded headers
    RequestHeader set X-Forwarded-Proto "https"
    RequestHeader set X-Forwarded-Port "443"
    RequestHeader set X-Forwarded-Prefix "/mediafusion"

    # Timeout settings (important for streaming)
    ProxyTimeout 180

    # Allow large uploads (for torrent files)
    LimitRequestBody 52428800
</Location>

# Optional: Health check endpoint
<Location /mediafusion/health>
    ProxyPass http://localhost:8000/health
    ProxyPassReverse http://localhost:8000/health
</Location>

# If using .htaccess instead, create .htaccess in your web root:
# RewriteEngine On
# RewriteRule ^mediafusion/(.*)$ http://localhost:8000/$1 [P,L]
# RequestHeader set X-Forwarded-Proto "https"
# RequestHeader set X-Forwarded-Prefix "/mediafusion"
